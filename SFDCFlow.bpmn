<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://activiti.org/bpmn20">
  <process id="SFDCFlow" name="SFDCalculatorFlow" isExecutable="true">
    <subProcess id="SFDCCalculator" name="SFDC Calculator">
      <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="Approver_LIST_COL" activiti:elementVariable="assignee"></multiInstanceLoopCharacteristics>
      <userTask id="BasicUserInfo" name="Step 1 of 2" activiti:assignee="${assignee}">
        <extensionElements>
          <activiti:formProperty id="UserCurrent" name="How many Salesforce.com Accounts do you currently pay for?" type="long" required="true"></activiti:formProperty>
          <activiti:formProperty id="UserNew" name="How many new Salesforce.com Accounts have been requested?" type="long" required="true"></activiti:formProperty>
          <activiti:formProperty id="UserLevel" name="Choose your typical Salesforce.com account level?" type="enum" required="true">
            <activiti:value id="NotSure" name="Not Sure"></activiti:value>
            <activiti:value id="ContactManager" name="Contact Manager"></activiti:value>
            <activiti:value id="Group" name="Group"></activiti:value>
            <activiti:value id="Professional" name="Professional"></activiti:value>
            <activiti:value id="Enterprise" name="Enterprise"></activiti:value>
            <activiti:value id="Performance" name="Performance"></activiti:value>
          </activiti:formProperty>
        </extensionElements>
      </userTask>
      <sequenceFlow id="flow29" sourceRef="BasicUserInfo" targetRef="scripttask2"></sequenceFlow>
      <serviceTask id="addInvitesScript" name="Add Invitees" activiti:class="plugins.wf_Add_Parties"></serviceTask>
      <scriptTask id="calculateResults" name="Calculate Results" scriptFormat="javascript" activiti:autoStoreVariables="true">
        <script>//*********************************************************************
//*******         Calculate Results                                ****
//*********************************************************************

// ***** reset party1_email to null;
party1_email = null;
addedInvitee = false;

//*********** get segment input: (PercentDedicatedUser, PercentOccasionalUser, PercentInfrequentUser, Percent3rdPartyUser)

UserMap.get(assignee).put("PercentDedicatedUser", PercentDedicatedUser);
UserMap.get(assignee).put("PercentOccasionalUser", PercentOccasionalUser);
UserMap.get(assignee).put("PercentInfrequentUser", PercentInfrequentUser);
UserMap.get(assignee).put("Percent3rdPartyUser", Percent3rdPartyUser);
UserMap.get(assignee).put("PercentTotal", PercentDedicatedUser*1+PercentOccasionalUser*1+PercentInfrequentUser*1+Percent3rdPartyUser*1);

 // ****** set crrent user map

UserMap.get(assignee).put("currentUser_dedicated", UserMap.get(assignee).get("UserCurrent")*UserMap.get(assignee).get("PercentDedicatedUser"));
UserMap.get(assignee).put("currentUser_occasional", UserMap.get(assignee).get("UserCurrent")*UserMap.get(assignee).get("PercentOccasionalUser"));
UserMap.get(assignee).put("currentUser_infrequent", UserMap.get(assignee).get("UserCurrent")*UserMap.get(assignee).get("PercentInfrequentUser"));
UserMap.get(assignee).put("currentUser_thirdParty", UserMap.get(assignee).get("UserCurrent")*UserMap.get(assignee).get("Percent3rdPartyUser"));

 // ****** set projected user map
UserMap.get(assignee).put("projectedUser_dedicated",  UserMap.get(assignee).get("projectedUser")*UserMap.get(assignee).get("PercentDedicatedUser"));
UserMap.get(assignee).put("projectedUser_occasional", UserMap.get(assignee).get("projectedUser")*UserMap.get(assignee).get("PercentOccasionalUser"));
UserMap.get(assignee).put("projectedUser_infrequent", UserMap.get(assignee).get("projectedUser")*UserMap.get(assignee).get("PercentInfrequentUser"));
UserMap.get(assignee).put("projectedUser_thirdParty", UserMap.get(assignee).get("projectedUser")*UserMap.get(assignee).get("Percent3rdPartyUser"));


 // ****** set min current user map  new
UserMap.get(assignee).put("minUserCurrentPIO_dedicated",  UserMap.get(assignee).get("currentUser_dedicated")*minSaveAssumptionMap.get("dedicated"));
UserMap.get(assignee).put("minUserCurrentPIO_occasional", UserMap.get(assignee).get("currentUser_occasional")*minSaveAssumptionMap.get("occasional"));
UserMap.get(assignee).put("minUserCurrentPIO_infrequent", UserMap.get(assignee).get("currentUser_infrequent")*minSaveAssumptionMap.get("infrequent"));
UserMap.get(assignee).put("minUserCurrentPIO_thirdParty", UserMap.get(assignee).get("currentUser_thirdParty")*minSaveAssumptionMap.get("thirdParty"));

UserMap.get(assignee).put("lowEndWithPIOCurrentUser", (UserMap.get(assignee).get("minUserCurrentPIO_dedicated")*1+UserMap.get(assignee).get("minUserCurrentPIO_occasional")*1+UserMap.get(assignee).get("minUserCurrentPIO_infrequent")*1+UserMap.get(assignee).get("minUserCurrentPIO_thirdParty")*1));
UserMap.get(assignee).put("lowEndWithPIOCurrentCost", UserMap.get(assignee).get("lowEndWithPIOCurrentUser")*UserMap.get(assignee).get("costPerUser"));


 // ****** set min projected user map new

UserMap.get(assignee).put("minUserProjectedPIO_dedicated",  UserMap.get(assignee).get("projectedUser_dedicated")*minSaveAssumptionMap.get("dedicated"));
UserMap.get(assignee).put("minUserProjectedPIO_occasional", UserMap.get(assignee).get("projectedUser_occasional")*minSaveAssumptionMap.get("occasional"));
UserMap.get(assignee).put("minUserProjectedPIO_infrequent", UserMap.get(assignee).get("projectedUser_infrequent")*minSaveAssumptionMap.get("infrequent"));
UserMap.get(assignee).put("minUserProjectedPIO_thirdParty", UserMap.get(assignee).get("projectedUser_thirdParty")*minSaveAssumptionMap.get("thirdParty"));

UserMap.get(assignee).put("lowEndWithPIOProjectedUser", (UserMap.get(assignee).get("minUserProjectedPIO_dedicated")*1+UserMap.get(assignee).get("minUserProjectedPIO_occasional")*1+UserMap.get(assignee).get("minUserProjectedPIO_infrequent")*1+UserMap.get(assignee).get("minUserProjectedPIO_thirdParty")*1));
UserMap.get(assignee).put("lowEndWithPIOProjectedCost", UserMap.get(assignee).get("lowEndWithPIOProjectedUser")*UserMap.get(assignee).get("costPerUser"));


 // ****** set max projected user map new

UserMap.get(assignee).put("maxUserProjectedPIO_dedicated",  UserMap.get(assignee).get("projectedUser_dedicated")*maxSaveAssumptionMap.get("dedicated"));
UserMap.get(assignee).put("maxUserProjectedPIO_occasional", UserMap.get(assignee).get("projectedUser_occasional")*maxSaveAssumptionMap.get("occasional"));
UserMap.get(assignee).put("maxUserProjectedPIO_infrequent", UserMap.get(assignee).get("projectedUser_infrequent")*maxSaveAssumptionMap.get("infrequent"));
UserMap.get(assignee).put("maxUserProjectedPIO_thirdParty", UserMap.get(assignee).get("projectedUser_thirdParty")*maxSaveAssumptionMap.get("thirdParty"));

UserMap.get(assignee).put("highEndWithPIOProjectedUser", (UserMap.get(assignee).get("maxUserProjectedPIO_dedicated")*1+UserMap.get(assignee).get("maxUserProjectedPIO_occasional")*1+UserMap.get(assignee).get("maxUserProjectedPIO_infrequent")*1+UserMap.get(assignee).get("maxUserProjectedPIO_thirdParty")*1));
UserMap.get(assignee).put("highEndWithPIOProjectedCost", UserMap.get(assignee).get("highEndWithPIOProjectedUser")*UserMap.get(assignee).get("costPerUser"));

 // ***** for display in Task 3 new
 CostPercentagePIO = 0.5;

UserMap.get(assignee).put("lowPotentialMonthlySavings",  (UserMap.get(assignee).get("currentMonthlySpend")*1-UserMap.get(assignee).get("lowEndWithPIOCurrentCost")*1));
UserMap.get(assignee).put("highPotentialMonthlySavings",  (UserMap.get(assignee).get("lowEndWithPIOProjectedCost")*1-UserMap.get(assignee).get("highEndWithPIOProjectedCost")*1));
UserMap.get(assignee).put("lowPIOCost",  (UserMap.get(assignee).get("lowPotentialMonthlySavings")*1-CostPercentagePIO*1));
UserMap.get(assignee).put("highPIOCost", (UserMap.get(assignee).get("highPotentialMonthlySavings")*1-CostPercentagePIO*1));

UserMap.get(assignee).put("lowProjectedYearlySaving",  (UserMap.get(assignee).get("lowPotentialMonthlySavings")*(1-CostPercentagePIO*1)*12));
UserMap.get(assignee).put("highProjectedYearlySaving", (UserMap.get(assignee).get("highPotentialMonthlySavings")*(1-CostPercentagePIO*1)*12));

UserMap.get(assignee).put("lowPotentialSavingPercent",  (UserMap.get(assignee).get("lowPotentialMonthlySavings")/UserMap.get(assignee).get("currentMonthlySpend")*100));
UserMap.get(assignee).put("highPotentialSavingPercent", (UserMap.get(assignee).get("highPotentialMonthlySavings")/UserMap.get(assignee).get("projectedMonthlySpend")*100));

UserMap.get(assignee).put("showYearlySavings",     ("$"+(UserMap.get(assignee).get("lowProjectedYearlySaving")*1.00).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+" ~ $"+(UserMap.get(assignee).get("highProjectedYearlySaving")*1.00).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
UserMap.get(assignee).put("showSavingsPercentage", (" " + (UserMap.get(assignee).get("lowPotentialSavingPercent")*1.00).toFixed(2) + "% ~ "+(UserMap.get(assignee).get("highPotentialSavingPercent")*1.00).toFixed(2) + "%"));

//***** set for display
UserMap.get(assignee).put("displayPercentDedicatedUser",  (UserMap.get(assignee).get("PercentDedicatedUser")*100).toFixed(2));
UserMap.get(assignee).put("displayPercentOccasionalUser", (UserMap.get(assignee).get("PercentOccasionalUser")*100).toFixed(2));
UserMap.get(assignee).put("displayPercentInfrequentUser", (UserMap.get(assignee).get("PercentInfrequentUser")*100).toFixed(2));
UserMap.get(assignee).put("displayPercent3rdPartyUser",   (UserMap.get(assignee).get("Percent3rdPartyUser")*100).toFixed(2));
UserMap.get(assignee).put("displaylowPotentialSavingPercent",   (UserMap.get(assignee).get("lowPotentialSavingPercent")*100).toFixed(2));
UserMap.get(assignee).put("displayhighPotentialSavingPercent",("$" + (UserMap.get(assignee).get("highPotentialSavingPercent")*100).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
UserMap.get(assignee).put("displayhighProjectedYearlySaving", ("$" + (UserMap.get(assignee).get("highProjectedYearlySaving")*1.00).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
</script>
      </scriptTask>
      <userTask id="Results" name="Your Savings" activiti:assignee="${assignee}">
        <extensionElements>
          <activiti:formProperty id="wf_optionsOutcome" name="Options" type="enum" required="true">
            <activiti:value id="emailResults" name="Email Details"></activiti:value>
            <activiti:value id="inviteOthers" name="Improve Accuracy"></activiti:value>
            <activiti:value id="return" name="Redo"></activiti:value>
            <activiti:value id="learnHow" name="Finish"></activiti:value>
          </activiti:formProperty>
          <activiti:formProperty id="showYearlySavings" name="Your Estimated Yearly SAVINGS are: " type="string" expression="${UserMap.get(assignee).get(&quot;showYearlySavings&quot;)}" writable="false"></activiti:formProperty>
          <activiti:formProperty id="showSavingsPercentage" name="which is between:" type="string" expression="${UserMap.get(assignee).get(&quot;showSavingsPercentage&quot;)}" writable="false"></activiti:formProperty>
        </extensionElements>
      </userTask>
      <serviceTask id="emailRestuls" name="Send Results" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${myEmail}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:string><![CDATA[alert@point.io]]></activiti:string>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:string><![CDATA[Salesforce.com Estimator Results from Point.io]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:expression>&lt;div&gt;&lt;h3&gt;Thanks for trying the Salesforce Explorer Saving estimator!&lt;/h3&gt;&lt;/div&gt;
&lt;div&gt;&lt;h4&gt;Here's the potential savings we calculated for you.&lt;/h4&gt;&lt;/div&gt;
&lt;div&gt;&lt;h4&gt;Please &lt;a href="http://point.io/quick-contact"&gt;contact us&lt;/a&gt; if you're interested in saving ${UserMap.get(assignee).get("displayhighProjectedYearlySaving")} or more each year on your Salesforce.com bill.&lt;/h4&gt;&lt;/div&gt;

&lt;br&gt;
&lt;strong&gt;Your responses:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many Salesforce.com Accounts do you currently pay for?&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("UserCurrent")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many new Salesforce.com Accounts have been requested?&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("UserNew")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your typical Salesforce.com account level?&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("UserLevel")} (${UserMap.get(assignee).get("costPerUser")} per user/per mo)&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Dedicated Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("displayPercentDedicatedUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Occasional Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("displayPercentOccasionalUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Infrequent Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("displayPercentInfrequentUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of 3rd Party Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get(assignee).get("displayPercent3rdPartyUser")} %&lt;/td&gt;&lt;/tr&gt;		
&lt;/table&gt;display
&lt;/br&gt;
&lt;strong&gt;Detailed estimates:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='center'&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;from&lt;/td&gt;&lt;td&gt; to &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your estimated Yearly SAVINGS is between:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get(assignee).get("showYearlySavings")}&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Saving % from your current cost:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get(assignee).get("showSavingsPercentage")}&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/br&gt;
&lt;div&gt;Your reference ID on this assessment is: ${execution.getProcessInstanceId()}.&lt;/div&gt;
&lt;/br&gt;
Want to see more about how save you money while still leveraging the power of Salesforce.com? 
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://point.io/SalesforceSavings"&gt;Salesforce Explorer Online&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.youtube.com/watch?v=NDIRGEsKUec"&gt;Youtube Video on Power Reporting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.youtube.com/watch?v=hWDPYq5kKEw"&gt;Youtube Video on Power Processing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

Sincerely,&lt;/br&gt;
Point.io Team&lt;/br&gt;
&lt;/br&gt;
www.point.io&lt;/br&gt;
contact@point.io&lt;/br&gt;
610-994-9660&lt;/br&gt;
&lt;/br&gt;
Point.io&lt;/br&gt;
3401 Market Street&lt;/br&gt;
Suite 202&lt;/br&gt;
Philadelphia, PA 19104&lt;/br&gt;</activiti:expression>
          </activiti:field>
          <activiti:field name="cc">
            <activiti:string><![CDATA[contact@point.io]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <userTask id="inviteMore" name="Improve Accuracy" activiti:assignee="${assignee}">
        <extensionElements>
          <activiti:formProperty id="wf_optionsOutcome" name="Options" type="enum" required="true">
            <activiti:value id="doneInvite" name="Send"></activiti:value>
            <activiti:value id="inviteMore" name="Invite More"></activiti:value>
            <activiti:value id="back" name="Cancel"></activiti:value>
          </activiti:formProperty>
          <activiti:formProperty id="party1_email" name="Invite by email, one email per input box" type="string"></activiti:formProperty>
          <activiti:formProperty id="party2_email" name="email" type="string"></activiti:formProperty>
          <activiti:formProperty id="party3_email" name="email" type="string"></activiti:formProperty>
          <activiti:formProperty id="party1_role" name="party1_role" type="string" expression="Approver" readable="false" writable="false"></activiti:formProperty>
          <activiti:formProperty id="party2_role" name="party2_role" type="string" expression="Approver" readable="false" writable="false"></activiti:formProperty>
          <activiti:formProperty id="party3_role" name="party3_role" type="string" expression="Approver" readable="false" writable="false"></activiti:formProperty>
        </extensionElements>
      </userTask>
      <sequenceFlow id="flow44" sourceRef="inviteMore" targetRef="exclusivegateway2"></sequenceFlow>
      <exclusiveGateway id="exclusivegateway2" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow46" sourceRef="exclusivegateway2" targetRef="setInviteeRole"></sequenceFlow>
      <sequenceFlow id="flow47" sourceRef="addInvitesScript" targetRef="exclusivegateway3"></sequenceFlow>
      <userTask id="InputUserSeg" name="Step 2 of 2" activiti:assignee="${assignee}">
        <extensionElements>
          <activiti:formProperty id="PercentDedicatedUser" name="What percentage are dedicated users?" type="long" required="true"></activiti:formProperty>
          <activiti:formProperty id="PercentOccasionalUser" name="What percentage are occasional users?" type="long" required="true"></activiti:formProperty>
          <activiti:formProperty id="PercentInfrequentUser" name="What percentage are infrequent users?" type="long" required="true"></activiti:formProperty>
          <activiti:formProperty id="Percent3rdPartyUser" name="What percentage are third-party users?" type="long" required="true"></activiti:formProperty>
          <activiti:formProperty id="totalPercentage" name="Total Percentage " type="long" expression="${PercentDedicatedUser + PercentOccasionalUser + PercentInfrequentUser + Percent3rdPartyUser}" writable="false"></activiti:formProperty>
        </extensionElements>
      </userTask>
      <sequenceFlow id="flow56" sourceRef="InputUserSeg" targetRef="exclusivegateway4"></sequenceFlow>
      <sequenceFlow id="flow57" sourceRef="exclusivegateway2" targetRef="Results">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'back'}]]></conditionExpression>
      </sequenceFlow>
      <exclusiveGateway id="exclusivegateway3" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow60" sourceRef="exclusivegateway3" targetRef="inviteMore">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'inviteMore'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow61" sourceRef="exclusivegateway3" targetRef="inputEmail">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'doneInvite'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow62" sourceRef="exclusivegateway4" targetRef="InputUserSeg">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${(PercentDedicatedUser*100 +  PercentOccasionalUser*100 + PercentInfrequentUser*100 + Percent3rdPartyUser*100) != 100}]]></conditionExpression>
      </sequenceFlow>
      <exclusiveGateway id="exclusivegateway4" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow63" sourceRef="exclusivegateway4" targetRef="calculateResults"></sequenceFlow>
      <startEvent id="startevent2" name="Start"></startEvent>
      <sequenceFlow id="flow66" sourceRef="startevent2" targetRef="exclusivegateway6"></sequenceFlow>
      <endEvent id="endevent2" name="End"></endEvent>
      <sequenceFlow id="flow68" sourceRef="scripttask3" targetRef="mailtask2"></sequenceFlow>
      <userTask id="inputEmail" name="Forward Results" activiti:assignee="${assignee}">
        <extensionElements>
          <activiti:formProperty id="myEmail" name="Send to this email" type="string" expression="${UserMap.get(assignee).get(&quot;myEmail&quot;)}" required="true"></activiti:formProperty>
        </extensionElements>
      </userTask>
      <sequenceFlow id="flow71" sourceRef="inputEmail" targetRef="emailRestuls"></sequenceFlow>
      <inclusiveGateway id="inclusivegateway1" name="Inclusive Gateway"></inclusiveGateway>
      <scriptTask id="setInviteeRole" name="Set Invitee Role" scriptFormat="javascript" activiti:autoStoreVariables="true">
        <script>party1_role = "Approver";
party2_role = "Approver";
party3_role = "Approver";
if(party1_email == "") {party1_email = null;}
if(party2_email == "") {party2_email = null;}
if(party3_email == "") {party3_email = null;}

addedInvitee = true;</script>
      </scriptTask>
      <sequenceFlow id="flow72" sourceRef="setInviteeRole" targetRef="addInvitesScript"></sequenceFlow>
      <sequenceFlow id="flow73" sourceRef="exclusivegateway3" targetRef="Results">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'back'}]]></conditionExpression>
      </sequenceFlow>
      <exclusiveGateway id="exclusivegateway6" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow74" sourceRef="exclusivegateway6" targetRef="BasicUserInfo">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!addedInvitee}]]></conditionExpression>
      </sequenceFlow>
      <scriptTask id="scripttask1" name="Invitee settings" scriptFormat="javascript" activiti:autoStoreVariables="true">
        <script>myEmail = assignee;
</script>
      </scriptTask>
      <serviceTask id="mailtask1" name="Send Invite" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:expression>${myEmail}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:string><![CDATA[alert@point.io]]></activiti:string>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:expression>You are invited to participate in a SFDC saving assessment. Reference ID: ${execution.getProcessInstanceId()}</activiti:expression>
          </activiti:field>
          <activiti:field name="html">
            <activiti:expression>&lt;div&gt;&lt;h3&gt;Your colleague thought you could add important detail to an estimate for saving on your yearly Salesforce.com licenses.&lt;/h3&gt;&lt;/div&gt;&lt;br&gt;
http://api.point.io/wizard/index.cfm?procid=${execution.getProcessInstanceId()}&lt;br&gt;
&lt;br&gt;
&lt;div&gt;&lt;h4&gt;Based on the initial response, there is a potential savings of ${UserMap.get("AVG").get("displayhighProjectedYearlySaving")}.&lt;/h4&gt;&lt;/div&gt;
&lt;div&gt;&lt;h4&gt;Please follow this link &lt;a href="http://point.io/quick-contact"&gt;to refine the calculations&lt;/a&gt; and improve the accuracy of the result.&lt;/h4&gt;&lt;/div&gt;

&lt;br&gt;
&lt;strong&gt;Your colleague's responses:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many Salesforce.com Accounts do you currently pay for?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserCurrent")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many new Salesforce.com Accounts have been requested?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserNew")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your typical Salesforce.com account level?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserLevel")} (${UserMap.get("AVG").get("costPerUser")} per user/per mo)&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Dedicated Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentDedicatedUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Occasional Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentOccasionalUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Infrequent Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentInfrequentUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of 3rd Party Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercent3rdPartyUser")} %&lt;/td&gt;&lt;/tr&gt;		
&lt;/table&gt;display
&lt;/br&gt;
&lt;strong&gt;Detailed estimates:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='center'&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;from&lt;/td&gt;&lt;td&gt; to &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your estimated Yearly SAVINGS is between:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get("AVG").get("showYearlySavings")}&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Saving % from your current cost:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get("AVG").get("showSavingsPercentage")}&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/br&gt;
&lt;div&gt;Your reference ID on this assessment is: ${execution.getProcessInstanceId()}.&lt;/div&gt;
&lt;/br&gt;
Want to see more about how save you money while still leveraging the power of Salesforce.com? 
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://point.io/SalesforceSavings"&gt;Salesforce Explorer Online&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.youtube.com/watch?v=NDIRGEsKUec"&gt;Youtube Video on Power Reporting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.youtube.com/watch?v=hWDPYq5kKEw"&gt;Youtube Video on Power Processing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

Sincerely,&lt;/br&gt;
Point.io Team&lt;/br&gt;
&lt;/br&gt;
www.point.io&lt;/br&gt;
contact@point.io&lt;/br&gt;
610-994-9660&lt;/br&gt;
&lt;/br&gt;
Point.io&lt;/br&gt;
3401 Market Street&lt;/br&gt;
Suite 202&lt;/br&gt;
Philadelphia, PA 19104&lt;/br&gt;</activiti:expression>
          </activiti:field>
          <activiti:field name="cc">
            <activiti:string><![CDATA[contact@point.io]]></activiti:string>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow75" sourceRef="exclusivegateway6" targetRef="scripttask1">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${addedInvitee}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow77" sourceRef="scripttask1" targetRef="mailtask1"></sequenceFlow>
      <sequenceFlow id="flow78" sourceRef="mailtask1" targetRef="BasicUserInfo"></sequenceFlow>
      <scriptTask id="scripttask2" name="get user input" scriptFormat="javascript" activiti:autoStoreVariables="true">
        <script>//*********************************************************************
//*******         get user input                                   ****
//*********************************************************************

UserMap.put(assignee, Packages.java.util.HashMap());
UserMap.get(assignee).put("myEmail", assignee);

//*********** get user input: (UserCurrent, UserNew, UserLevel)
UserMap.get(assignee).put("UserCurrent", UserCurrent);
UserMap.get(assignee).put("UserNew", UserNew);
UserMap.get(assignee).put("UserLevel", UserLevel);

//****** calculate costPerUser
UserMap.get(assignee).put("costPerUser", 1 * userLevelCostMap.get(UserMap.get(assignee).get("UserLevel")));
UserMap.get(assignee).put("projectedUser", UserMap.get(assignee).get("UserCurrent")*1+UserMap.get(assignee).get("UserNew")*1);
UserMap.get(assignee).put("currentMonthlySpend", UserMap.get(assignee).get("UserCurrent")*UserMap.get(assignee).get("costPerUser"));
UserMap.get(assignee).put("projectedMonthlySpend", UserMap.get(assignee).get("projectedUser")*UserMap.get(assignee).get("costPerUser"));

UserMap.get(assignee).put("PercentTotal", 0.00);</script>
      </scriptTask>
      <sequenceFlow id="flow79" sourceRef="scripttask2" targetRef="InputUserSeg"></sequenceFlow>
      <exclusiveGateway id="exclusivegateway7" name="Exclusive Gateway"></exclusiveGateway>
      <sequenceFlow id="flow81" sourceRef="Results" targetRef="exclusivegateway7"></sequenceFlow>
      <sequenceFlow id="flow82" sourceRef="exclusivegateway7" targetRef="scripttask3">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'learnHow'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow83" sourceRef="exclusivegateway7" targetRef="BasicUserInfo">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'return'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow84" sourceRef="exclusivegateway7" targetRef="inviteMore">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'inviteOthers'}]]></conditionExpression>
      </sequenceFlow>
      <sequenceFlow id="flow85" sourceRef="exclusivegateway7" targetRef="inputEmail">
        <conditionExpression xsi:type="tFormalExpression"><![CDATA[${wf_optionsOutcome == 'emailResults'}]]></conditionExpression>
      </sequenceFlow>
      <scriptTask id="scripttask3" name="Calculate AVG" scriptFormat="javascript" activiti:autoStoreVariables="false">
        <script>//*********************************************************************
//*******         Calculate AVG                                    ****
//*********************************************************************

UserMap.get("AVG").put("ParticipantCount", (UserMap.get("AVG").get("ParticipantCount")*1+1));

//*********** AVG user input: (UserCurrent, UserNew, UserLevel)

UserMap.get("AVG").put("UserCurrentTotal", (UserMap.get("AVG").get("UserCurrentTotal")*1 + UserMap.get(assignee).get("UserCurrent")*1));
UserMap.get("AVG").put("UserNewTotal",     (UserMap.get("AVG").get("UserNewTotal")*1     + UserMap.get(assignee).get("UserNew")*1));
UserMap.get("AVG").put("costPerUserTotal", (UserMap.get("AVG").get("costPerUserTotal")*1 + UserMap.get(assignee).get("costPerUser")*1));
UserMap.get("AVG").put("UserLevel", UserMap.get(assignee).get("UserLevel"));

if(UserMap.get("AVG").get("ParticipantCount")!=0){
   UserMap.get("AVG").put("UserCurrent", ((UserMap.get("AVG").get("UserCurrentTotal")*1)/ (UserMap.get("AVG").get("ParticipantCount"))));
   UserMap.get("AVG").put("UserNew",     ((UserMap.get("AVG").get("UserNewTotal")*1)    / (UserMap.get("AVG").get("ParticipantCount"))));
   UserMap.get("AVG").put("costPerUser", ((UserMap.get("AVG").get("costPerUserTotal")*1)/ (UserMap.get("AVG").get("ParticipantCount"))));
}

//************ * calculate costPerUser
UserMap.get("AVG").put("projectedUser",         UserMap.get("AVG").get("UserCurrent")*1+UserMap.get("AVG").get("UserNew")*1);
UserMap.get("AVG").put("currentMonthlySpend",   UserMap.get("AVG").get("UserCurrent") * UserMap.get("AVG").get("costPerUser"));
UserMap.get("AVG").put("projectedMonthlySpend", UserMap.get("AVG").get("projectedUser")*UserMap.get("AVG").get("costPerUser"));


//*********************************************************************
//*********** AVG segment input: (PercentDedicatedUser, PercentOccasionalUser, PercentInfrequentUser, Percent3rdPartyUser)

UserMap.get("AVG").put("PercentDedicatedUserTotal",  (UserMap.get("AVG").get("PercentDedicatedUserTotal")*1 +  UserMap.get(assignee).get("PercentDedicatedUser")*1));
UserMap.get("AVG").put("PercentOccasionalUserTotal", (UserMap.get("AVG").get("PercentOccasionalUserTotal")*1 + UserMap.get(assignee).get("PercentOccasionalUser")*1));
UserMap.get("AVG").put("PercentInfrequentUserTotal", (UserMap.get("AVG").get("PercentInfrequentUserTotal")*1 + UserMap.get(assignee).get("PercentInfrequentUser")*1));
UserMap.get("AVG").put("Percent3rdPartyUserTotal",   (UserMap.get("AVG").get("Percent3rdPartyUserTotal")*1   + UserMap.get(assignee).get("Percent3rdPartyUser")*1));


if(UserMap.get("AVG").get("ParticipantCount")!=0){
   UserMap.get("AVG").put("PercentDedicatedUser",  ((UserMap.get("AVG").get("PercentDedicatedUserTotal")*1) / (UserMap.get("AVG").get("ParticipantCount"))));
   UserMap.get("AVG").put("PercentOccasionalUser", ((UserMap.get("AVG").get("PercentOccasionalUserTotal")*1)/ (UserMap.get("AVG").get("ParticipantCount"))));
   UserMap.get("AVG").put("PercentInfrequentUser", ((UserMap.get("AVG").get("PercentInfrequentUserTotal")*1)/ (UserMap.get("AVG").get("ParticipantCount"))));
   UserMap.get("AVG").put("Percent3rdPartyUser",   ((UserMap.get("AVG").get("Percent3rdPartyUserTotal")*1)  / (UserMap.get("AVG").get("ParticipantCount"))));
}


UserMap.get("AVG").put("PercentTotal", UserMap.get("AVG").get("PercentDedicatedUser")*1+UserMap.get("AVG").get("PercentOccasionalUser")*1+UserMap.get("AVG").get("PercentInfrequentUser")*1+UserMap.get("AVG").get("Percent3rdPartyUser")*1);


 // ****** set crrent user seg

UserMap.get("AVG").put("currentUser_dedicated", UserMap.get("AVG").get("UserCurrent")*UserMap.get("AVG").get("PercentDedicatedUser"));
UserMap.get("AVG").put("currentUser_occasional", UserMap.get("AVG").get("UserCurrent")*UserMap.get("AVG").get("PercentOccasionalUser"));
UserMap.get("AVG").put("currentUser_infrequent", UserMap.get("AVG").get("UserCurrent")*UserMap.get("AVG").get("PercentInfrequentUser"));
UserMap.get("AVG").put("currentUser_thirdParty", UserMap.get("AVG").get("UserCurrent")*UserMap.get("AVG").get("Percent3rdPartyUser"));

 // ****** set projected user seg
UserMap.get("AVG").put("projectedUser_dedicated",  UserMap.get("AVG").get("projectedUser")*UserMap.get("AVG").get("PercentDedicatedUser"));
UserMap.get("AVG").put("projectedUser_occasional", UserMap.get("AVG").get("projectedUser")*UserMap.get("AVG").get("PercentOccasionalUser"));
UserMap.get("AVG").put("projectedUser_infrequent", UserMap.get("AVG").get("projectedUser")*UserMap.get("AVG").get("PercentInfrequentUser"));
UserMap.get("AVG").put("projectedUser_thirdParty", UserMap.get("AVG").get("projectedUser")*UserMap.get("AVG").get("Percent3rdPartyUser"));


 // ****** set min current user seg  new
UserMap.get("AVG").put("minUserCurrentPIO_dedicated",  UserMap.get("AVG").get("currentUser_dedicated")*minSaveAssumptionMap.get("dedicated"));
UserMap.get("AVG").put("minUserCurrentPIO_occasional", UserMap.get("AVG").get("currentUser_occasional")*minSaveAssumptionMap.get("occasional"));
UserMap.get("AVG").put("minUserCurrentPIO_infrequent", UserMap.get("AVG").get("currentUser_infrequent")*minSaveAssumptionMap.get("infrequent"));
UserMap.get("AVG").put("minUserCurrentPIO_thirdParty", UserMap.get("AVG").get("currentUser_thirdParty")*minSaveAssumptionMap.get("thirdParty"));

UserMap.get("AVG").put("lowEndWithPIOCurrentUser", (UserMap.get("AVG").get("minUserCurrentPIO_dedicated")*1+UserMap.get("AVG").get("minUserCurrentPIO_occasional")*1+UserMap.get("AVG").get("minUserCurrentPIO_infrequent")*1+UserMap.get("AVG").get("minUserCurrentPIO_thirdParty")*1));
UserMap.get("AVG").put("lowEndWithPIOCurrentCost", UserMap.get("AVG").get("lowEndWithPIOCurrentUser")*UserMap.get("AVG").get("costPerUser"));


 // ****** set min projected user seg new

UserMap.get("AVG").put("minUserProjectedPIO_dedicated",  UserMap.get("AVG").get("projectedUser_dedicated")*minSaveAssumptionMap.get("dedicated"));
UserMap.get("AVG").put("minUserProjectedPIO_occasional", UserMap.get("AVG").get("projectedUser_occasional")*minSaveAssumptionMap.get("occasional"));
UserMap.get("AVG").put("minUserProjectedPIO_infrequent", UserMap.get("AVG").get("projectedUser_infrequent")*minSaveAssumptionMap.get("infrequent"));
UserMap.get("AVG").put("minUserProjectedPIO_thirdParty", UserMap.get("AVG").get("projectedUser_thirdParty")*minSaveAssumptionMap.get("thirdParty"));

UserMap.get("AVG").put("lowEndWithPIOProjectedUser", (UserMap.get("AVG").get("minUserProjectedPIO_dedicated")*1+UserMap.get("AVG").get("minUserProjectedPIO_occasional")*1+UserMap.get("AVG").get("minUserProjectedPIO_infrequent")*1+UserMap.get("AVG").get("minUserProjectedPIO_thirdParty")*1));
UserMap.get("AVG").put("lowEndWithPIOProjectedCost", UserMap.get("AVG").get("lowEndWithPIOProjectedUser")*UserMap.get("AVG").get("costPerUser"));


 // ****** set max projected user seg new

UserMap.get("AVG").put("maxUserProjectedPIO_dedicated",  UserMap.get("AVG").get("projectedUser_dedicated")*maxSaveAssumptionMap.get("dedicated"));
UserMap.get("AVG").put("maxUserProjectedPIO_occasional", UserMap.get("AVG").get("projectedUser_occasional")*maxSaveAssumptionMap.get("occasional"));
UserMap.get("AVG").put("maxUserProjectedPIO_infrequent", UserMap.get("AVG").get("projectedUser_infrequent")*maxSaveAssumptionMap.get("infrequent"));
UserMap.get("AVG").put("maxUserProjectedPIO_thirdParty", UserMap.get("AVG").get("projectedUser_thirdParty")*maxSaveAssumptionMap.get("thirdParty"));

UserMap.get("AVG").put("highEndWithPIOProjectedUser", (UserMap.get("AVG").get("maxUserProjectedPIO_dedicated")*1+UserMap.get("AVG").get("maxUserProjectedPIO_occasional")*1+UserMap.get("AVG").get("maxUserProjectedPIO_infrequent")*1+UserMap.get("AVG").get("maxUserProjectedPIO_thirdParty")*1));
UserMap.get("AVG").put("highEndWithPIOProjectedCost", UserMap.get("AVG").get("highEndWithPIOProjectedUser")*UserMap.get("AVG").get("costPerUser"));

 // ***** for calc 
 CostPercentagePIO = 0.5;

UserMap.get("AVG").put("lowPotentialMonthlySavings",  (UserMap.get("AVG").get("currentMonthlySpend")*1-UserMap.get("AVG").get("lowEndWithPIOCurrentCost")*1));
UserMap.get("AVG").put("highPotentialMonthlySavings",  (UserMap.get("AVG").get("lowEndWithPIOProjectedCost")*1-UserMap.get("AVG").get("highEndWithPIOProjectedCost")*1));
UserMap.get("AVG").put("lowPIOCost",  (UserMap.get("AVG").get("lowPotentialMonthlySavings")*1-CostPercentagePIO*1));
UserMap.get("AVG").put("highPIOCost", (UserMap.get("AVG").get("highPotentialMonthlySavings")*1-CostPercentagePIO*1));

UserMap.get("AVG").put("lowProjectedYearlySaving",  (UserMap.get("AVG").get("lowPotentialMonthlySavings")*(1-CostPercentagePIO*1)*12));
UserMap.get("AVG").put("highProjectedYearlySaving", (UserMap.get("AVG").get("highPotentialMonthlySavings")*(1-CostPercentagePIO*1)*12));

UserMap.get("AVG").put("lowPotentialSavingPercent",  (UserMap.get("AVG").get("lowPotentialMonthlySavings")/UserMap.get("AVG").get("currentMonthlySpend")*100));
UserMap.get("AVG").put("highPotentialSavingPercent", (UserMap.get("AVG").get("highPotentialMonthlySavings")/UserMap.get("AVG").get("projectedMonthlySpend")*100));

UserMap.get("AVG").put("showYearlySavings",     ("$"+(UserMap.get("AVG").get("lowProjectedYearlySaving")*1.00).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+" ~ $"+(UserMap.get("AVG").get("highProjectedYearlySaving")*1.00).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
UserMap.get("AVG").put("showSavingsPercentage", (" " + (UserMap.get("AVG").get("lowPotentialSavingPercent")*1.00).toFixed(2) + "% ~ "+(UserMap.get("AVG").get("highPotentialSavingPercent")*1.00).toFixed(2) + "%"));

//***** set for display
UserMap.get("AVG").put("displayPercentDedicatedUser",  (UserMap.get("AVG").get("PercentDedicatedUser")*100).toFixed(2));
UserMap.get("AVG").put("displayPercentOccasionalUser", (UserMap.get("AVG").get("PercentOccasionalUser")*100).toFixed(2));
UserMap.get("AVG").put("displayPercentInfrequentUser", (UserMap.get("AVG").get("PercentInfrequentUser")*100).toFixed(2));
UserMap.get("AVG").put("displayPercent3rdPartyUser",   (UserMap.get("AVG").get("Percent3rdPartyUser")*100).toFixed(2));
UserMap.get("AVG").put("displaylowPotentialSavingPercent",   (UserMap.get("AVG").get("lowPotentialSavingPercent")*100).toFixed(2));
UserMap.get("AVG").put("displayhighPotentialSavingPercent",("$" + (UserMap.get("AVG").get("highPotentialSavingPercent")*100).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
UserMap.get("AVG").put("displayhighProjectedYearlySaving", ("$" + (UserMap.get("AVG").get("highProjectedYearlySaving")*1.00).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")));
</script>
      </scriptTask>
      <sequenceFlow id="flow87" sourceRef="calculateResults" targetRef="Results"></sequenceFlow>
      <sequenceFlow id="flow88" sourceRef="emailRestuls" targetRef="scripttask3"></sequenceFlow>
      <serviceTask id="mailtask2" name="send AVG" activiti:type="mail">
        <extensionElements>
          <activiti:field name="to">
            <activiti:string><![CDATA[contact@point.io]]></activiti:string>
          </activiti:field>
          <activiti:field name="subject">
            <activiti:expression>SFDC Calculator AVG for Process ID: ${execution.getProcessInstanceId()}</activiti:expression>
          </activiti:field>
          <activiti:field name="from">
            <activiti:string><![CDATA[alert@point.io]]></activiti:string>
          </activiti:field>
          <activiti:field name="cc">
            <activiti:string><![CDATA[jwang@point.io]]></activiti:string>
          </activiti:field>
          <activiti:field name="html">
            <activiti:expression>&lt;h2&gt;Average of input&lt;/h2&gt;
&lt;div&gt;&lt;h4&gt;Based on the initial response, there is a potential savings of ${UserMap.get("AVG").get("displayhighProjectedYearlySaving")}.&lt;/h4&gt;&lt;/div&gt;
&lt;div&gt;&lt;h4&gt;Please follow this link &lt;a href="http://point.io/quick-contact"&gt;to refine the calculations&lt;/a&gt; and improve the accuracy of the result.&lt;/h4&gt;&lt;/div&gt;

&lt;br&gt;
&lt;strong&gt;Input:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many Salesforce.com Accounts do you currently pay for?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserCurrent")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many new Salesforce.com Accounts have been requested?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserNew")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your typical Salesforce.com account level?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserLevel")} (${UserMap.get("AVG").get("costPerUser")} per user/per mo)&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Dedicated Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentDedicatedUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Occasional Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentOccasionalUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Infrequent Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentInfrequentUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of 3rd Party Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercent3rdPartyUser")} %&lt;/td&gt;&lt;/tr&gt;		
&lt;/table&gt;display
&lt;/br&gt;
&lt;strong&gt;Detailed estimates:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='center'&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;from&lt;/td&gt;&lt;td&gt; to &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your estimated Yearly SAVINGS is between:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get("AVG").get("showYearlySavings")}&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Saving % from your current cost:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get("AVG").get("showSavingsPercentage")}&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/br&gt;
&lt;div&gt;Process ID on this assessment is: ${execution.getProcessInstanceId()}.&lt;/div&gt;
&lt;/br&gt;</activiti:expression>
          </activiti:field>
        </extensionElements>
      </serviceTask>
      <sequenceFlow id="flow89" sourceRef="mailtask2" targetRef="endevent2"></sequenceFlow>
    </subProcess>
    <sequenceFlow id="flow40" sourceRef="SFDCCalculator" targetRef="exclusivegateway5"></sequenceFlow>
    <serviceTask id="addInitialApprover" name="Add Initial Approver" activiti:class="plugins.wf_Add_Parties"></serviceTask>
    <sequenceFlow id="flow54" sourceRef="addInitialApprover" targetRef="SFDCCalculator"></sequenceFlow>
    <scriptTask id="InitialSettings" name="Initial Settings" scriptFormat="javascript" activiti:autoStoreVariables="true">
      <documentation>set point.io email as default email to start process.</documentation>
      <script>//************************************************************
//*******         Initial Settings                        ****
//************************************************************

// ****** set approver to originator of process
party1_role = 'Approver';
if (null == execution.getVariable("party1_email"))
      {party1_email = wf_currentAssignee;}
addedInvitee = false;
myEmail = "";

// ****** set initial value of user segment, can be removed
PercentDedicatedUser = 0.75;
PercentOccasionalUser = 0.1;
PercentInfrequentUser = 0.1;
Percent3rdPartyUser = 0.05;
PercentageTotal = 1.0;


// ****** set user level to cost mapping     DO NOT REMOVE
userLevelCostMap=Packages.java.util.HashMap();
userLevelCostMap.put("ContactManager",   5.00);
userLevelCostMap.put("Group",            25.00);
userLevelCostMap.put("Professional",     65.00);
userLevelCostMap.put("Enterprise",      125.00);
userLevelCostMap.put("Performance",     300.00);
userLevelCostMap.put("NotSure",        125.00);

 // ****** set min save Assumption map     DO NOT REMOVE
minSaveAssumptionMap=Packages.java.util.HashMap();
minSaveAssumptionMap.put("dedicated",   "1");
minSaveAssumptionMap.put("occasional",  "0.75");
minSaveAssumptionMap.put("infrequent",  "0.5");
minSaveAssumptionMap.put("thirdParty",  "0.25");

 // ****** set max save Assumption map     DO NOT REMOVE
maxSaveAssumptionMap=Packages.java.util.HashMap();
maxSaveAssumptionMap.put("dedicated",   "0.75");
maxSaveAssumptionMap.put("occasional",  "0.5");
maxSaveAssumptionMap.put("infrequent",  "0.0");
maxSaveAssumptionMap.put("thirdParty",  "0.0");

//**** initial UserMap and AVG
UserMap=Packages.java.util.HashMap();
UserMap.put("AVG", Packages.java.util.HashMap());
UserMap.get("AVG").put("ParticipantCount", 0);

UserMap.get("AVG").put("ParticipantCount", 0);
UserMap.get("AVG").put("UserCurrent", 0);
UserMap.get("AVG").put("UserNew", 0);
UserMap.get("AVG").put("UserLevel", 0);
UserMap.get("AVG").put("costPerUser", 0);
UserMap.get("AVG").put("PercentDedicatedUser", 0);
UserMap.get("AVG").put("PercentOccasionalUser", 0);
UserMap.get("AVG").put("PercentInfrequentUser", 0);
UserMap.get("AVG").put("Percent3rdPartyUser", 0);
</script>
    </scriptTask>
    <sequenceFlow id="flow55" sourceRef="InitialSettings" targetRef="addInitialApprover"></sequenceFlow>
    <startEvent id="startevent1" name="Start"></startEvent>
    <endEvent id="endevent1" name="End"></endEvent>
    <sequenceFlow id="flow65" sourceRef="startevent1" targetRef="InitialSettings"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway5" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow64" sourceRef="exclusivegateway5" targetRef="mailtask3">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!addedInvitee}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow42" sourceRef="exclusivegateway5" targetRef="SFDCCalculator">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${addedInvitee}]]></conditionExpression>
    </sequenceFlow>
    <serviceTask id="mailtask3" name="Mail End AVG" activiti:type="mail">
      <documentation>need to add object store saving step after this.</documentation>
      <extensionElements>
        <activiti:field name="to">
          <activiti:string><![CDATA[contact@point.io]]></activiti:string>
        </activiti:field>
        <activiti:field name="from">
          <activiti:string><![CDATA[alert@point.io]]></activiti:string>
        </activiti:field>
        <activiti:field name="subject">
          <activiti:expression>SFDC Calculator AVG for Process ID: ${execution.getProcessInstanceId()}  End Results</activiti:expression>
        </activiti:field>
        <activiti:field name="cc">
          <activiti:string><![CDATA[jwang@point.io]]></activiti:string>
        </activiti:field>
        <activiti:field name="html">
          <activiti:expression>&lt;h2&gt;Process has ended, Average of input and results is here.&lt;/h2&gt;
&lt;div&gt;&lt;h4&gt;Based on the initial response, there is a potential savings of ${UserMap.get("AVG").get("displayhighProjectedYearlySaving")}.&lt;/h4&gt;&lt;/div&gt;

&lt;br&gt;
&lt;strong&gt;AVG Input:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many Salesforce.com Accounts do you currently pay for?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserCurrent")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;How many new Salesforce.com Accounts have been requested?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserNew")} &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your typical Salesforce.com account level?&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("UserLevel")} (${UserMap.get("AVG").get("costPerUser")} per user/per mo)&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Dedicated Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentDedicatedUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Occasional Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentOccasionalUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of Infrequent Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercentInfrequentUser")} %&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;% of 3rd Party Users:&lt;/td&gt;&lt;td&gt; ${UserMap.get("AVG").get("displayPercent3rdPartyUser")} %&lt;/td&gt;&lt;/tr&gt;		
&lt;/table&gt;display
&lt;/br&gt;
&lt;strong&gt;Detailed estimates:&lt;/strong&gt;
&lt;table&gt;
	&lt;tr align='center'&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;from&lt;/td&gt;&lt;td&gt; to &lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Your estimated Yearly SAVINGS is between:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get("AVG").get("showYearlySavings")}&lt;/td&gt;&lt;/tr&gt;
	&lt;tr align='right'&gt;&lt;td&gt;Saving % from your current cost:&lt;/td&gt;&lt;td style="border: 1px solid black;"&gt;${UserMap.get("AVG").get("showSavingsPercentage")}&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/br&gt;
&lt;div&gt;Process ID on this assessment is: ${execution.getProcessInstanceId()}.&lt;/div&gt;
&lt;/br&gt;</activiti:expression>
        </activiti:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="flow90" sourceRef="mailtask3" targetRef="servicetask1"></sequenceFlow>
    <serviceTask id="servicetask1" name="Service Task" activiti:class="plugins.ApidataStore"></serviceTask>
    <sequenceFlow id="flow91" sourceRef="servicetask1" targetRef="endevent1"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_SFDCFlow10">
    <bpmndi:BPMNPlane bpmnElement="SFDCFlow10" id="BPMNPlane_SFDCFlow10">
      <bpmndi:BPMNShape bpmnElement="SFDCCalculator" id="BPMNShape_SFDCCalculator">
        <omgdc:Bounds height="426.0" width="1024.0" x="87.0" y="165.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="BasicUserInfo" id="BPMNShape_BasicUserInfo">
        <omgdc:Bounds height="55.0" width="105.0" x="222.0" y="197.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="addInvitesScript" id="BPMNShape_addInvitesScript">
        <omgdc:Bounds height="55.0" width="105.0" x="941.0" y="460.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="calculateResults" id="BPMNShape_calculateResults">
        <omgdc:Bounds height="55.0" width="105.0" x="652.0" y="197.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="Results" id="BPMNShape_Results">
        <omgdc:Bounds height="55.0" width="105.0" x="837.0" y="197.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="emailRestuls" id="BPMNShape_emailRestuls">
        <omgdc:Bounds height="55.0" width="105.0" x="490.0" y="460.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="inviteMore" id="BPMNShape_inviteMore">
        <omgdc:Bounds height="55.0" width="105.0" x="739.0" y="363.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway2" id="BPMNShape_exclusivegateway2">
        <omgdc:Bounds height="40.0" width="40.0" x="869.0" y="370.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="InputUserSeg" id="BPMNShape_InputUserSeg">
        <omgdc:Bounds height="55.0" width="105.0" x="460.0" y="197.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway3" id="BPMNShape_exclusivegateway3">
        <omgdc:Bounds height="40.0" width="40.0" x="771.0" y="467.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway4" id="BPMNShape_exclusivegateway4">
        <omgdc:Bounds height="40.0" width="40.0" x="580.0" y="207.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startevent2" id="BPMNShape_startevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="100.0" y="207.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent2" id="BPMNShape_endevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="345.0" y="478.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="inputEmail" id="BPMNShape_inputEmail">
        <omgdc:Bounds height="55.0" width="105.0" x="620.0" y="460.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="inclusivegateway1" id="BPMNShape_inclusivegateway1">
        <omgdc:Bounds height="40.0" width="40.0" x="1164.0" y="345.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="setInviteeRole" id="BPMNShape_setInviteeRole">
        <omgdc:Bounds height="55.0" width="105.0" x="941.0" y="363.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway6" id="BPMNShape_exclusivegateway6">
        <omgdc:Bounds height="40.0" width="40.0" x="150.0" y="204.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask1" id="BPMNShape_scripttask1">
        <omgdc:Bounds height="55.0" width="105.0" x="118.0" y="291.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="mailtask1" id="BPMNShape_mailtask1">
        <omgdc:Bounds height="55.0" width="105.0" x="118.0" y="424.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask2" id="BPMNShape_scripttask2">
        <omgdc:Bounds height="55.0" width="105.0" x="340.0" y="200.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway7" id="BPMNShape_exclusivegateway7">
        <omgdc:Bounds height="40.0" width="40.0" x="652.0" y="370.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask3" id="BPMNShape_scripttask3">
        <omgdc:Bounds height="55.0" width="105.0" x="490.0" y="363.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="mailtask2" id="BPMNShape_mailtask2">
        <omgdc:Bounds height="55.0" width="105.0" x="310.0" y="363.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="addInitialApprover" id="BPMNShape_addInitialApprover">
        <omgdc:Bounds height="55.0" width="105.0" x="544.0" y="36.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="InitialSettings" id="BPMNShape_InitialSettings">
        <omgdc:Bounds height="55.0" width="105.0" x="296.0" y="36.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="startevent1" id="BPMNShape_startevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="113.0" y="46.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent1" id="BPMNShape_endevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="1162.0" y="60.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway5" id="BPMNShape_exclusivegateway5">
        <omgdc:Bounds height="40.0" width="40.0" x="1159.0" y="357.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="mailtask3" id="BPMNShape_mailtask3">
        <omgdc:Bounds height="55.0" width="105.0" x="1127.0" y="266.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask1" id="BPMNShape_servicetask1">
        <omgdc:Bounds height="55.0" width="105.0" x="1127.0" y="154.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flow29" id="BPMNEdge_flow29">
        <omgdi:waypoint x="327.0" y="224.0"></omgdi:waypoint>
        <omgdi:waypoint x="340.0" y="227.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow44" id="BPMNEdge_flow44">
        <omgdi:waypoint x="844.0" y="390.0"></omgdi:waypoint>
        <omgdi:waypoint x="869.0" y="390.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow46" id="BPMNEdge_flow46">
        <omgdi:waypoint x="909.0" y="390.0"></omgdi:waypoint>
        <omgdi:waypoint x="941.0" y="390.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow47" id="BPMNEdge_flow47">
        <omgdi:waypoint x="941.0" y="487.0"></omgdi:waypoint>
        <omgdi:waypoint x="811.0" y="487.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow56" id="BPMNEdge_flow56">
        <omgdi:waypoint x="565.0" y="224.0"></omgdi:waypoint>
        <omgdi:waypoint x="580.0" y="227.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow57" id="BPMNEdge_flow57">
        <omgdi:waypoint x="889.0" y="370.0"></omgdi:waypoint>
        <omgdi:waypoint x="889.0" y="252.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow60" id="BPMNEdge_flow60">
        <omgdi:waypoint x="791.0" y="467.0"></omgdi:waypoint>
        <omgdi:waypoint x="791.0" y="418.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow61" id="BPMNEdge_flow61">
        <omgdi:waypoint x="771.0" y="487.0"></omgdi:waypoint>
        <omgdi:waypoint x="725.0" y="487.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow62" id="BPMNEdge_flow62">
        <omgdi:waypoint x="600.0" y="247.0"></omgdi:waypoint>
        <omgdi:waypoint x="597.0" y="283.0"></omgdi:waypoint>
        <omgdi:waypoint x="509.0" y="284.0"></omgdi:waypoint>
        <omgdi:waypoint x="512.0" y="252.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow63" id="BPMNEdge_flow63">
        <omgdi:waypoint x="620.0" y="227.0"></omgdi:waypoint>
        <omgdi:waypoint x="652.0" y="224.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow66" id="BPMNEdge_flow66">
        <omgdi:waypoint x="135.0" y="224.0"></omgdi:waypoint>
        <omgdi:waypoint x="150.0" y="224.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow68" id="BPMNEdge_flow68">
        <omgdi:waypoint x="490.0" y="390.0"></omgdi:waypoint>
        <omgdi:waypoint x="415.0" y="390.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow71" id="BPMNEdge_flow71">
        <omgdi:waypoint x="620.0" y="487.0"></omgdi:waypoint>
        <omgdi:waypoint x="595.0" y="487.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow72" id="BPMNEdge_flow72">
        <omgdi:waypoint x="993.0" y="418.0"></omgdi:waypoint>
        <omgdi:waypoint x="993.0" y="460.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow73" id="BPMNEdge_flow73">
        <omgdi:waypoint x="791.0" y="507.0"></omgdi:waypoint>
        <omgdi:waypoint x="788.0" y="528.0"></omgdi:waypoint>
        <omgdi:waypoint x="1081.0" y="528.0"></omgdi:waypoint>
        <omgdi:waypoint x="1080.0" y="380.0"></omgdi:waypoint>
        <omgdi:waypoint x="1080.0" y="223.0"></omgdi:waypoint>
        <omgdi:waypoint x="942.0" y="224.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow74" id="BPMNEdge_flow74">
        <omgdi:waypoint x="190.0" y="224.0"></omgdi:waypoint>
        <omgdi:waypoint x="222.0" y="224.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow75" id="BPMNEdge_flow75">
        <omgdi:waypoint x="170.0" y="244.0"></omgdi:waypoint>
        <omgdi:waypoint x="170.0" y="291.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow77" id="BPMNEdge_flow77">
        <omgdi:waypoint x="170.0" y="346.0"></omgdi:waypoint>
        <omgdi:waypoint x="170.0" y="424.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow78" id="BPMNEdge_flow78">
        <omgdi:waypoint x="223.0" y="451.0"></omgdi:waypoint>
        <omgdi:waypoint x="272.0" y="447.0"></omgdi:waypoint>
        <omgdi:waypoint x="274.0" y="252.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow79" id="BPMNEdge_flow79">
        <omgdi:waypoint x="445.0" y="227.0"></omgdi:waypoint>
        <omgdi:waypoint x="460.0" y="224.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow81" id="BPMNEdge_flow81">
        <omgdi:waypoint x="889.0" y="252.0"></omgdi:waypoint>
        <omgdi:waypoint x="672.0" y="370.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow82" id="BPMNEdge_flow82">
        <omgdi:waypoint x="652.0" y="390.0"></omgdi:waypoint>
        <omgdi:waypoint x="595.0" y="390.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow83" id="BPMNEdge_flow83">
        <omgdi:waypoint x="672.0" y="370.0"></omgdi:waypoint>
        <omgdi:waypoint x="669.0" y="322.0"></omgdi:waypoint>
        <omgdi:waypoint x="272.0" y="321.0"></omgdi:waypoint>
        <omgdi:waypoint x="274.0" y="252.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow84" id="BPMNEdge_flow84">
        <omgdi:waypoint x="692.0" y="390.0"></omgdi:waypoint>
        <omgdi:waypoint x="739.0" y="390.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow85" id="BPMNEdge_flow85">
        <omgdi:waypoint x="672.0" y="410.0"></omgdi:waypoint>
        <omgdi:waypoint x="672.0" y="460.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow87" id="BPMNEdge_flow87">
        <omgdi:waypoint x="757.0" y="224.0"></omgdi:waypoint>
        <omgdi:waypoint x="837.0" y="224.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow88" id="BPMNEdge_flow88">
        <omgdi:waypoint x="542.0" y="460.0"></omgdi:waypoint>
        <omgdi:waypoint x="542.0" y="418.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow89" id="BPMNEdge_flow89">
        <omgdi:waypoint x="362.0" y="418.0"></omgdi:waypoint>
        <omgdi:waypoint x="362.0" y="478.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow40" id="BPMNEdge_flow40">
        <omgdi:waypoint x="1111.0" y="378.0"></omgdi:waypoint>
        <omgdi:waypoint x="1159.0" y="377.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow54" id="BPMNEdge_flow54">
        <omgdi:waypoint x="596.0" y="91.0"></omgdi:waypoint>
        <omgdi:waypoint x="599.0" y="165.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow55" id="BPMNEdge_flow55">
        <omgdi:waypoint x="401.0" y="63.0"></omgdi:waypoint>
        <omgdi:waypoint x="544.0" y="63.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow65" id="BPMNEdge_flow65">
        <omgdi:waypoint x="148.0" y="63.0"></omgdi:waypoint>
        <omgdi:waypoint x="296.0" y="63.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow64" id="BPMNEdge_flow64">
        <omgdi:waypoint x="1179.0" y="357.0"></omgdi:waypoint>
        <omgdi:waypoint x="1179.0" y="321.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow42" id="BPMNEdge_flow42">
        <omgdi:waypoint x="1179.0" y="397.0"></omgdi:waypoint>
        <omgdi:waypoint x="1176.0" y="620.0"></omgdi:waypoint>
        <omgdi:waypoint x="600.0" y="620.0"></omgdi:waypoint>
        <omgdi:waypoint x="599.0" y="591.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow90" id="BPMNEdge_flow90">
        <omgdi:waypoint x="1179.0" y="266.0"></omgdi:waypoint>
        <omgdi:waypoint x="1179.0" y="209.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow91" id="BPMNEdge_flow91">
        <omgdi:waypoint x="1179.0" y="154.0"></omgdi:waypoint>
        <omgdi:waypoint x="1179.0" y="95.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>